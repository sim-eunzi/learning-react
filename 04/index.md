# 리액트의 작동 원리 

## 4.1 페이지 설정

리액트를 브라우저에서 다루려면 **React** 와 **ReactDOM** 라이브러리를 불러와야한다.  
**React**는 뷰를 만들기 위한 라이브러리고,  
**ReactDOM**은 UI를 실제로 브라우저에 렌더링 할때 사용하는 라이브러리다.  

두 라이브러리는 unpkg CDN 스크립트로 바로 다운로드 할 수 있다.  

## 4.2 리액트 엘리먼트 

HTML은 브라우저가 문서 객체 모델(DOM)을 구성하기 위해 따라야하는 절차라고 말할 수 있다.  
HTML 문서를 이루는 엘리먼트는 브라우저가 HTML 문서를 읽어들이면 DOM 엘리먼트가 되고,   
이 DOM이 사용자 인터페이스를 화면에 표시한다.  

레시피를 보여주기 위한 HTML 구조를 만들어보자.  

```html
  <section id="baked-salmon">
    <h1>구운 연어</h1>
    <ul class="ingredients">
      <li>연어 900그램</li>
      <li>신선한 로즈마리 5가지</li>
      <li>올리브 오일 2스푼</li>
      <li>작은 레몬 2조각</li>
      <li>코셔 소금 1티스푼</li>
      <li>다진 마늘 4쪽</li>
    </ul>
    <section id="instructions">
      <h1>조리 과정</h1>
      <p>오븐을 190도로 예열한다</p>
      <p>알루미늄 호일에 올리브 오일을 가볍게 두른다</p>
      <p>연어를 포일에 올린다</p>
      <p>로즈마리, 레몬, 다진마늘을 연어 위에 얹는다</p>
      <p>완전히 익을 때까지 15-20분간 굽는다</p>
    </section>
  </section>
```

전통적으로 웹사이트는 독립적인 HTML 페이지들로 만들어졌다.  
사용자가 페이지 사이를 이동하면서 브라우저는 매번 다른 HTML 문서를 요청해서 로딩했었다.  

**AJAX**가 생기면서 **단일 페이지 애플리케이션(SPA)** 가 생겼는데,  
브라우저가 AJAX를 사용해서 아주 작은 데이터를 요청해 가져올 수 있게 됨에 따라,  
이제는 전체 웹 애플리케이션이 한 페이지로 실행되면서 UI를 갱신할 수 있게 되었다.  

SPA는 처음에 HTML 문서 하나만 적재된다.  
사용자는 사이트를 내비게이션하지만, 실제로는 같은 페이지안에 계속 머문다.  
자바스크립트는 사용자가 애플리케이션과 상호 작용하는 것에 맞춰 기존 인터페이스에서 새로운 UI를 만든다.  
실제로 같은 HTML 페이지 안에 머물고, 자바스크립트가 모든 처리를 대신 해준다.  

**DOM API**는 브라우저의 DOM을 변경하기 위해 자바스크립트가 사용할 수 있는 객체의 모음이다.  
화면에 표시된 DOM 엘리먼트를 JS로 갱신하거나 변경하기는 상대적으로 쉽다.  

리액트도 브라우저 DOM을 갱신해주기 위해 만들어진 라이브러리다.  
리액트가 모든 처리를 맡아서 하기 때문에 SPA를 효율적으로 만들기 위해 여러 내용을 신경쓸 필요가 없다.  

리액트에서는 DOM API를 직접 조작하지 않고, 어떤 UI를 생성할지 지시하면 명령에 따라 렌더링을 해준다.  
리액트에서는 리액트 엘리먼트로 이뤄진 **가상 DOM**으로 이뤄진다.  

가상 DOM은 실제 DOM 엘리먼트와 비슷하지만 자바스크립트 객체이다.  
이는 실제 DOM API를 직접 다루는 것보다 훨씬 빠르다.  
우리가 가상 DOM을 변경하면 리액트는 DOM API를 통해 그 변경사항을 가장 효율적으로 렌더링해준다.  

리액트 엘리먼트는 브라우저 DOM을 만드는 방법을 알려주는 명령이다.  
```javascript
React.createElement("h1", { id: 'recipe-0' }, '구운 연어')

// <h1 id="recipe-0">구운 연어</h1>
```
첫번째 인자로 엘리먼트의 타입을 정의하고,  
두번째 인자는 엘리먼트의 프로퍼티를 정의한다.  
세번째 인자는 여는 태그와 닫는 태그 사이에 들어갈 자식 노트를 표현한다.  

리액트 엘리먼트는 DOM 엘리먼트를 구성하는 방법을 알려주는 리터럴에 불과하다. 

```javascript
{ 
  $$typeof: Symbol(React.element),
  "type": "h1",
  "key": null,
  "ref": null,
  "props": { id: 'recipe-9', children: '구운 연어'},
  "_owner": null,
  "_store": {}
}
```

리액트 엘리먼트의 type 프로퍼티는 만들고자하는 HTML이나 SVG 엘리먼트의 타입을 지정한다.  
props 프로퍼티는 DOM을 만들기 위해 필요한 데이터나 자식 엘리먼트를 표현한다.  